<div class="space-y-8">
  <!-- Emergency Banner -->
  <div class="card bg-error/10 border border-error/20 shadow-sm rounded-2xl">
    <div class="card-body flex-row items-center gap-4 text-error py-4 px-6">
      <div class="p-3 bg-error/20 rounded-full">
        <i class="material-symbols-outlined !text-2xl">warning</i>
      </div>
      <div>
        <h2 class="card-title text-lg font-bold">
          ¿Necesitas ayuda inmediata?
        </h2>
        <p class="text-sm opacity-90">
          Si estás en crisis o peligro inmediato, contacta los servicios de
          emergencia.
        </p>
      </div>
    </div>
  </div>

  @if (resources.isLoading()) {
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <div class="skeleton h-80 w-full rounded-2xl"></div>
      <div class="skeleton h-80 w-full rounded-2xl"></div>
      <div class="skeleton h-80 w-full rounded-2xl"></div>
    </div>
  } @else if (resources.error()) {
    <div class="alert alert-error shadow-lg rounded-2xl">
      <i class="material-symbols-outlined !text-2xl">error</i>
      <div class="flex-1">
        <h3 class="font-bold">Error al cargar recursos</h3>
        <div class="text-xs">Por favor intenta recargar la página.</div>
      </div>
      <button class="btn btn-sm btn-circle btn-ghost" (click)="reload()">
        <i class="material-symbols-outlined">refresh</i>
      </button>
    </div>
  } @else {
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      @for (resource of resources.value() ?? []; track resource.id) {
        <div
          class="card bg-base-100 shadow-md hover:shadow-xl transition-all duration-300 border border-base-200 rounded-2xl overflow-hidden group"
        >
          <figure class="h-48 w-full bg-base-200 relative overflow-hidden">
            @if (resource.resourceUrl) {
              <img
                [src]="resource.resourceUrl"
                [alt]="resource.name"
                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
              />
            } @else {
              <div
                class="w-full h-full flex items-center justify-center text-base-content/20"
              >
                <i class="material-symbols-outlined !text-6xl"
                  >image_not_supported</i
                >
              </div>
            }
          </figure>

          <div class="card-body p-6">
            <h2 class="card-title text-xl font-bold mb-2">
              {{ resource.name }}
            </h2>
            <p class="text-sm opacity-70 line-clamp-3 mb-4">
              {{ resource.description }}
            </p>

            <div class="divider my-2"></div>

            <div class="space-y-3">
              <!-- Contacts -->
              @if (resource.contacts && resource.contacts.length > 0) {
                <div class="flex flex-col gap-2">
                  <p
                    class="text-xs font-bold uppercase opacity-50 tracking-wider"
                  >
                    Contactos
                  </p>
                  <div class="flex flex-wrap gap-2">
                    @for (contact of resource.contacts; track $index) {
                      <div
                        class="badge badge-lg badge-outline gap-2 pl-1.5 pr-1 py-4 w-full justify-between"
                      >
                        <div class="flex items-center gap-2 truncate">
                          <i class="material-symbols-outlined !text-lg"
                            >phone</i
                          >
                          <span class="text-sm font-medium">{{ contact }}</span>
                        </div>
                        <div class="flex gap-1">
                          <a
                            href="tel:{{ contact }}"
                            class="btn btn-circle btn-xs btn-ghost text-primary"
                            title="Llamar"
                          >
                            <i
                              class="material-symbols-outlined !text-base text-info"
                              >call</i
                            >
                          </a>
                          <button
                            (click)="copyToClipboard(contact)"
                            class="btn btn-circle btn-xs btn-ghost text-success"
                            title="Copiar"
                          >
                            <i class="material-symbols-outlined !text-base"
                              >content_copy</i
                            >
                          </button>
                        </div>
                      </div>
                    }
                  </div>
                </div>
              }

              <!-- Links -->
              @if (resource.links && resource.links.length > 0) {
                <div class="flex flex-col gap-2 mt-2">
                  <p
                    class="text-xs font-bold uppercase opacity-50 tracking-wider"
                  >
                    Enlaces
                  </p>
                  <div class="flex flex-wrap gap-2">
                    @for (link of resource.links; track $index) {
                      <a
                        [href]="link"
                        target="_blank"
                        class="btn btn-sm btn-outline btn-info w-full justify-between group/link"
                      >
                        <span class="truncate max-w-[80%] text-left">
                          {{ link }}
                        </span>
                        <i
                          class="material-symbols-outlined !text-lg group-hover/link:translate-x-1 transition-transform"
                          >arrow_outward</i
                        >
                      </a>
                    }
                  </div>
                </div>
              }
            </div>
          </div>
        </div>
      }
    </div>
  }
</div>
